<Auk::Navbar @skin="gray-100" @size="large">
  <WebComponents::AuToolbar>
    <WebComponents::AuToolbar::Group @position="left">
      <WebComponents::AuToolbar::Item>
        <Auk::Button
          @layout="icon-only"
          @skin="borderless"
          @icon="chevron-left"
          @size="large"
          @route="press-releases.overview"
        />
      </WebComponents::AuToolbar::Item>
      <WebComponents::AuToolbar::Item>
        <div class="auk-overline auk-u-block auk-u-muted">
          Persberichten
        </div>
        <h2 class="auk-toolbar__title">
          {{this.model.title}}
        </h2>
      </WebComponents::AuToolbar::Item>
    </WebComponents::AuToolbar::Group>
    <WebComponents::AuToolbar::Group @position="right">
      <WebComponents::AuToolbar::Item>
        <WebComponents::AuStatusPill @status="done">
          {{dayjs-from-now this.model.modified}} opgeslagen
        </WebComponents::AuStatusPill>
      </WebComponents::AuToolbar::Item>
      <WebComponents::AuToolbar::Item>
        <Auk::Button
          @skin="primary"
          @icon="chevron-down"
          @layout="icon-right"
          {{on "click" this.openPublishDropdown}}>
          Publiceren
        </Auk::Button>
        {{#if this.showPublishDropdown}}
          {{!-- TODO use popper library to make dropdown disappear on click outside --}}
          <Auk::Dropdown>
            <div class="auk-menu__item" {{on "click" this.openPublicationModal}} >
              Publiceren
            </div>
            <div class="auk-menu__item" {{on "click" this.openPublicationPlanningModal}} >
              Later publiceren
            </div>
          </Auk::Dropdown>
        {{/if}}
      </WebComponents::AuToolbar::Item>
    </WebComponents::AuToolbar::Group>
  </WebComponents::AuToolbar>
</Auk::Navbar>

<PressRelease::Form @pressRelease={{this.model}} />

{{#if this.showPublicationModal}}
  <PressRelease::PublicationModal
    @onCancel={{this.closePublicationModal}}
    @onPublish={{perform this.publish}}
    @loading={{this.publish.isRunning}}
  />
{{/if}}

{{#if this.showPublicationPlanningModal}}
  <PressRelease::PublicationPlanningModal
    @onCancel={{this.closePublicationPlanningModal}}
    @onPublish={{perform this.publish}}
    @loading={{this.publish.isRunning}}
  />
{{/if}}

{{outlet}}